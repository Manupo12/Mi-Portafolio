---
// ARCHIVO: src/components/Contacto.astro
// Descripción (español):
// - Sección de contacto que muestra: un CTA para enviar correo, enlaces a
//   GitHub y LinkedIn, y un enlace a WhatsApp con su icono.
// - El icono de WhatsApp se carga en tiempo de compilación leyendo el SVG del
//   sistema de archivos (carpeta `public`) y luego se inyecta en el HTML con `set:html`.
//
// Notas sobre el método:
// - Los imports de `lucide-react` (Github, Linkedin, Mail) proporcionan iconos
//   vectoriales ligeros en runtime del cliente.
// - La lectura del SVG se realiza con el módulo `fs` de Node (server-side) y
//   por tanto no añade carga de red en el cliente: el SVG se incrusta en el HTML.

import { Github, Linkedin, Mail } from 'lucide-react';
import TituloSeccion from './TituloSeccion.astro';

// [1] Importamos módulos de Node.js para leer archivos del sistema. Esto se ejecuta
// en tiempo de compilación/servidor (frontmatter de Astro), no en el cliente.
import { promises as fs } from 'fs';
import path from 'path';

// --- IMPORTANTE ---
// Reemplaza los valores de las constantes con tu información real si procede.
// Aquí las conservamos exactamente como estaban para no alterar la lógica.
const GITHUB_URL = "https://github.com/Manupo12";
const LINKEDIN_URL = "https://www.linkedin.com/in/villanueva-kotlin/"; // Tu URL de LinkedIn
const EMAIL = "manup121223@gmail.com";
const WHATSAPP_NUMBER = "573202070445"; // Número en formato internacional sin '+' ni espacios
// NOTE: La siguiente línea usa un template literal que incorpora un valor numérico.
// No cambiamos su contenido porque pediste no alterar la lógica.
const WHATSAPP_URL = `https://wa.me/${573202070445}`;

// [2] Lectura del archivo SVG (WhatsApp):
// - `path.resolve('public/icons/whatsapp.svg')` construye la ruta absoluta al archivo
//   dentro de la carpeta `public` del proyecto.
// - `fs.readFile(..., 'utf-8')` devuelve el contenido del SVG como string, que
//   luego se inserta en el template con `set:html`.
const svgPath = path.resolve('public/icons/whatsapp.svg');
const WhatsAppIcon = await fs.readFile(svgPath, 'utf-8');
---
<div class="text-center">
    <TituloSeccion titulo="Hablemos" />
</div>

<div class="mt-12 max-w-3xl mx-auto p-8 md:p-12 bg-gray-900/50 border border-gray-700/60 rounded-2xl shadow-2xl shadow-emerald-900/20 space-y-8">
    
    <p class="text-lg md:text-xl text-center text-gray-300">
        He desarrollado una base sólida de habilidades en desarrollo web y Android a través de un aprendizaje constante y proyectos personales. Ahora, busco la oportunidad de llevar esa dedicación al siguiente nivel en un entorno profesional. Si crees que mi perfil tiene potencial para tu equipo, me encantaría conversar sobre cómo puedo empezar a sumar.
    </p>

    <div class="flex justify-center">
        <a 
            href={`mailto:${EMAIL}`} 
            class="inline-flex items-center gap-3 text-white bg-emerald-600 hover:bg-emerald-700 font-semibold rounded-lg px-8 py-4 transition-all duration-300 transform hover:scale-105"
        >
          <!-- Botón principal: abre el cliente de correo con el correo definido en EMAIL -->
          <Mail size={24} />
          <span>Envíame un Correo</span>
        </a>
    </div>

    <div class="text-center space-y-4 pt-4">
        <p class="text-sm text-gray-500">O encuéntrame en otras plataformas</p>
        <div class="flex justify-center items-center space-x-8">
            <a href={GITHUB_URL} target="_blank" class="text-gray-400 hover:text-emerald-400 transition-colors" aria-label="GitHub">
                <Github size={28} />
            </a>
            <a href={LINKEDIN_URL} target="_blank" class="text-gray-400 hover:text-emerald-400 transition-colors" aria-label="LinkedIn">
                <Linkedin size={28} />
            </a>

            <a href={WHATSAPP_URL} target="_blank" class="text-gray-400 hover:text-emerald-400 transition-colors" aria-label="WhatsApp">
             <!-- Icono de WhatsApp: se inyecta el markup SVG leído desde 'public/icons/whatsapp.svg'.
                 El wrapper aplica tamaño al SVG via utilidades CSS. -->
             <div class="[&>svg]:w-7 [&>svg]:h-7" set:html={WhatsAppIcon} />
            </a>
        </div>
    </div>
</div>